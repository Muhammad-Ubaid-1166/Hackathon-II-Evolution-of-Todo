# Backend Specification â€“ SQLModel Todo API Update

## Overview
This update refactors the existing FastAPI Todo API to properly use SQLModel for database operations instead of mixing SQLAlchemy and SQLModel patterns. The API now uses a proper database-backed storage with SQLModel models.

## Technology Stack
- Python 3.x
- FastAPI
- SQLModel (for ORM and Pydantic integration)
- SQLAlchemy (underlying ORM)
- PostgreSQL (via psycopg2-binary)
- uv (Python environment and dependency manager)

## Data Model

### Todo
Each todo item consists of the following fields:

- **id** (Optional[int])  
  Unique identifier for the todo item, auto-generated by database

- **title** (string)  
  Title or description of the todo

- **category** (Category enum)  
  Allowed values:
  - backlog
  - todo
  - doing
  - done

The default category value is `backlog`.

## Database Schema
- Table name: `todos`
- Uses SQLModel's table=True to create database table
- Primary key: `id` with auto-increment
- Index on `title` and `category`

## API Endpoints

### Root Endpoint
**GET /**  
Returns a message confirming that the API is running.

### Get All Todos
**GET /todos**  
Returns a list of all todo items from the database.

### Create Todo
**POST /todos**  
Creates a new todo item in the database. Returns the created todo object.

### Update Todo
**PUT /todos/{id}**  
Updates an existing todo item identified by its ID. Returns the updated todo object or error if not found.

### Delete Todo
**DELETE /todos/{id}**  
Deletes a todo item by its ID. Returns success message or error if not found.

## Storage Behavior
- Todos are stored in a PostgreSQL database
- Data is persistent across server restarts
- Uses SQLModel Session for database operations
- Automatic table creation on startup

## Improvements Over Previous Version
- Proper SQLModel usage with table=True models
- Database persistence instead of in-memory storage
- Type-safe enum for categories
- Consistent session management
- Better error handling
- Pydantic validation integrated with ORM
